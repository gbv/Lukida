var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(c.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(a==Array.prototype||a==Object.prototype)return a;a[c]=b.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<a.length;++c){var b=a[c];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,c){var b=$jscomp.propertyToPolyfillSymbol[c];if(null==b)return a[c];b=a[b];return void 0!==b?b:a[c]};
$jscomp.polyfill=function(a,c,b,d){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,c,b,d):$jscomp.polyfillUnisolated(a,c,b,d))};$jscomp.polyfillUnisolated=function(a,c,b,d){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in b))return;b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(a,c,b,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?d[e]:null;c=c(b);null!=c&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:c}):c!==b&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):
$jscomp.POLYFILL_PREFIX+e),e=$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:c})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(c,b){return $jscomp.findInternal(this,c,b).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var c=function(e,f){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:f})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var b=0,d=function(e){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(e||"")+"_"+b++,e)};return d},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),b=0;b<c.length;b++){var d=$jscomp.global[c[b]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,c){a instanceof String&&(a+="");var b=0,d=!1,e={next:function(){if(!d&&b<a.length){var f=b++;return{value:c(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})}},"es8","es3");var urlport=location.protocol+"//",configlang={},config={},messid=0,params={areas:[],start:moment().subtract(8,"days").format("YYYY-MM-DD"),end:moment().subtract(1,"days").format("YYYY-MM-DD"),year:moment().format("YYYY")},mainarea="",chart="searches",bstacked=!1,access=!1;$.go=function(a){"discover"==a&&(window.location.href=urlport+window.location.host)};
$.toggle_area=function(a){$("#"+a+"up").toggleClass("collapse");$("#"+a+"down").toggleClass("collapse");$("#library"+a).is(":hidden")?$("#library"+a).slideDown("slow"):$("#library"+a).slideUp("slow")};$.set_params=function(){params.areas="";$(".well").find(":checkbox").each(function(){"Stapel"==$(this).attr("name")?bstacked=this.checked?!0:!1:params.areas=""==params.areas?params.areas+(this.checked?$(this).data("value"):""):params.areas+(this.checked?","+$(this).data("value"):"")})};
$.open_password=function(){var a=new BootstrapDialog({message:'<div class="form-horizontal"><div class="form-group"><label for="pwpasswort" class="col-sm-3 control-label">'+configlang.PASSWORD+'</label><div class="col-sm-9"><input type="password" class="form-control keyenter" id="pwpasswort" placeholder="'+configlang.PASSWORD+'"></div></div><div id="pw_messagebar"></div></div>',title:configlang.MODULEACCESS,closable:!0,buttons:[{icon:"glyphicon glyphicon-menu-up",label:" "+configlang.CANCEL,action:function(c){c.close()}},
{icon:"glyphicon glyphicon-log-in",label:" "+configlang.LOGIN,cssClass:"fullview-button-color",id:"pwbutton",action:function(c){$(this).blur();pw=$("#pwpasswort").val().trim();if(""==pw)return $.user_message(configlang.PASSWORDWRONG,"warning","pw"),$("#pwpasswort").focus(),-1;$.post("/ajax/checkpw",{module:"library",pw:pw},function(b){"1"==b.status?(access=!0,c.close(),$.set_cockpit()):($.user_message(configlang.LOGINERROR,"warning","pw"),$("#kennung").focus())},"json")}}],onshown:function(){$(".keyenter").keypress(function(c){13==
c.which&&($(this).blur(),$("#pwbutton").focus().click())});$("#pwpasswort").focus()}});a.realize();a.getModalHeader().addClass("preview-header");a.setData("name","pw");a.open()};
$.set_language=function(a,c){$.post("/ajax/language",{language:a},function(b){configlang=b;$(".ger").html(configlang.GER);$(".eng").html(configlang.ENG);$(".selectlanguage").attr("title",configlang.SELECTLANGUAGE);config.language=a;"ger"==a?($(".lang_ger").removeClass("hide"),$(".lang_eng").addClass("hide")):($(".lang_ger").addClass("hide"),$(".lang_eng").removeClass("hide"));$.refresh();c||$.user_message(configlang.LANGUAGECHANGED,"success")},"json")};
$.user_message=function(a,c,b,d){void 0==d&&(d=3E3);var e="success"==c?"panel-success":"panel-danger";messid++;$("#"+(void 0===b?"statusbar":b)+"_messagebar").append($("<div id='message"+messid+"' class='alert-message "+c+"' data-alert></div>"));$("#message"+messid).hide().html("<div class='panel "+e+"'><div class='panel-heading'>"+a+"</div></div>").fadeIn("fast");$("#message"+messid).delay(d).fadeOut("slow",function(){$(this).remove()})};
$.refresh=function(){$("#container_cockpit").hasClass("collapse")||$.set_cockpit();$("#container_chart").hasClass("collapse")||$.set_chart(chart);$("#container_log").hasClass("collapse")||$.set_log()};
$.set_cockpit=function(){if(access){void 0!==window.myChart&&window.myChart.destroy();"cockpit"!=mainarea&&(mainarea="cockpit",$("#container_chart").addClass("collapse"),$("#container_log").addClass("collapse"),$("#container_cockpit").removeClass("collapse"),$("#libraryoption").is(":visible")?$("#libraryoption").slideUp("slow",function(){$("#optionup").toggleClass("collapse");$("#optiondown").toggleClass("collapse");$("#libraryoption").find(".option").hide();$("#libraryoption").find(".cockpit").show()}):
($("#libraryoption").find(".option").hide(),$("#libraryoption").find(".cockpit").show()),$("#libraryhelp").is(":visible")?$("#libraryhelp").slideUp("slow",function(){$("#helpup").toggleClass("collapse");$("#helpdown").toggleClass("collapse");$("#help_chart").addClass("collapse");$("#help_log").addClass("collapse");$("#help_cockpit").removeClass("collapse")}):($("#help_chart").addClass("collapse"),$("#help_log").addClass("collapse"),$("#help_cockpit").removeClass("collapse")));var a=$.ajax({url:"/ajax/cockpit",
method:"POST",dataType:"JSON",data:{params:JSON.stringify(params)}});a.done(function(c){var b="";$.each(c.data,function(){b+="<div class='row'>";area=this.label;icon=this.icon;count=0;$.each(this.values,function(d,e){count++;b+="<div class='col-md-4'>";b+="<div class='widget ";1==count%3&&(b+="navy");2==count%3&&(b+="lazur");0==count%3&&(b+="orange");b+="'>";b+="<div class='row'>";b+="<div class='col-xs-4'>";b+="<i class='"+icon+"'></i>";b+="</div>";b+="<div class='col-xs-8 text-right'>";b+="<span> "+
area+" "+d+"</span>";b+="<h2 class='font-bold'>"+e+"</h2>";b+="</div>";b+="</div>";b+="</div>";b+="</div>"});b+="</div>"});$("#results_cockpit").html(b)});a.fail(function(c,b){console.log("Request failed: "+b)})}else $.open_password()};
$.set_chart=function(a){if(access){if("chart"!=mainarea||chart!=a)mainarea="chart",chart=a,$("#container_cockpit").addClass("collapse"),$("#container_log").addClass("collapse"),$("#container_chart").removeClass("collapse"),$("#libraryoption").is(":visible")?$("#libraryoption").slideUp("slow",function(){$("#optionup").toggleClass("collapse");$("#optiondown").toggleClass("collapse");$("#libraryoption").find(".option").hide();$("#libraryoption").find("."+a).show()}):($("#libraryoption").find(".option").hide(),
$("#libraryoption").find("."+a).show()),$("#libraryhelp").is(":visible")?$("#libraryhelp").slideUp("slow",function(){$("#helpup").toggleClass("collapse");$("#helpdown").toggleClass("collapse");$("#help_cockpit").addClass("collapse");$("#help_log").addClass("collapse");$("#help_chart").removeClass("collapse");$("#help_chart").find(".well").hide();$("#help_chart").find("."+a).show()}):($("#help_cockpit").addClass("collapse"),$("#help_log").addClass("collapse"),$("#help_chart").removeClass("collapse"),
$("#help_chart").find(".well").hide(),$("#help_chart").find("."+a).show());"searches"==a&&$.ajax({url:"/ajax/chart",method:"POST",dataType:"JSON",data:{typ:"searches",params:JSON.stringify(params)},success:function(c){void 0!==window.myChart&&window.myChart.destroy();var b=$("#chart");window.myChart=new Chart(b,{type:"bar",data:c.data,options:{title:c.title,scales:{xAxes:[{ticks:{fontColor:"#000"}}],yAxes:[{ticks:{beginAtZero:!0,fontColor:"#000"}}],gridLines:{Color:"rgba(0, 0, 0, 1)",lineWidth:2}}}})}});
"usage"==a&&$.ajax({url:"/ajax/chart",method:"POST",dataType:"JSON",data:{typ:"usage",params:JSON.stringify(params)},success:function(c){void 0!==window.myChart&&window.myChart.destroy();var b=$("#chart");window.myChart=new Chart(b,{type:"line",data:c.data,options:{title:c.title,scales:{xAxes:[{ticks:{fontColor:"#000"}}],yAxes:[{ticks:{beginAtZero:!0,fontColor:"#000"},stacked:bstacked}],gridLines:{Color:"rgba(0, 0, 0, 1)",lineWidth:2}}}})}});"usageyear"==a&&$.ajax({url:"/ajax/chart",method:"POST",
dataType:"JSON",data:{typ:"usageyear",params:JSON.stringify(params)},success:function(c){void 0!==window.myChart&&window.myChart.destroy();var b=$("#chart");window.myChart=new Chart(b,{type:"bar",data:c.data,options:{title:c.title,scales:{xAxes:[{ticks:{fontColor:"#000"}}],yAxes:[{ticks:{beginAtZero:!0,fontColor:"#000"},stacked:bstacked}],gridLines:{Color:"rgba(0, 0, 0, 1)",lineWidth:2}}}})}});"devicescreens"==a&&$.ajax({url:"/ajax/chart",method:"POST",dataType:"JSON",data:{typ:"devicescreens",params:JSON.stringify(params)},
success:function(c){void 0!==window.myChart&&window.myChart.destroy();var b=$("#chart");window.myChart=new Chart(b,{type:"bubble",data:c.data,options:{title:c.title,legend:{display:!1}}})}})}else $.open_password()};
$.set_log=function(){if(access){void 0!==window.myChart&&window.myChart.destroy();"log"!=mainarea&&(mainarea="log",$("#container_cockpit").addClass("collapse"),$("#container_chart").addClass("collapse"),$("#container_log").removeClass("collapse"),$("#libraryoption").is(":visible")?$("#libraryoption").slideUp("slow",function(){$("#optionup").toggleClass("collapse");$("#optiondown").toggleClass("collapse");$("#libraryoption").find(".option").hide();$("#libraryoption").find(".log").show()}):($("#libraryoption").find(".option").hide(),
$("#libraryoption").find(".log").show()),$("#libraryhelp").is(":visible")?$("#libraryhelp").slideUp("slow",function(){$("#helpup").toggleClass("collapse");$("#helpdown").toggleClass("collapse");$("#help_cockpit").addClass("collapse");$("#help_chart").addClass("collapse");$("#help_log").removeClass("collapse")}):($("#help_cockpit").addClass("collapse"),$("#help_chart").addClass("collapse"),$("#help_log").removeClass("collapse")));$("#searchlog").keyup(function(){$("tr.entry").removeClass("collapse");
$("tr.entry:not(:contains("+$("#searchlogtext").val().toLowerCase()+"))").addClass("collapse")});var a=$.ajax({url:"/ajax/log",method:"POST",dataType:"JSON",data:{params:JSON.stringify(params)}});a.done(function(c){var b="";b+="<div class='table-responsive'>";b+="<table class='table table-striped'>";b+="<thead><tr>";$.each(c.data[0],function(d,e){"id"!=d&&"Details"!=d&&(b+="<th>"+d+"</th>")});b+="</tr></thead>";b+="<tbody>";$.each(c.data,function(d){b+="<tr class='entry' id='log_'"+c.data[d].id+"''>";
$.each(c.data[d],function(e,f){"id"!=e&&(b="Details"==e?b+("<td style='display:none;'>"+$(f).text().toLowerCase()+"</td>"):b+("<td>"+f+"</td>"))});b+="<td>";b+="<button onClick='javascript:$.open_details(\""+escape(encodeURIComponent(c.data[d].Details))+"\")'>Details</button>";b+="</td>";b+="</tr>"});b+="</tbody></table></div>";$("#results_log").html(b)});a.fail(function(c,b){console.log("Request failed: "+b)})}else $.open_password()};
$.open_details=function(a){a=decodeURIComponent(unescape(a));a=new BootstrapDialog({message:"<div><div>"+a+'</div><div id="pw_messagebar"></div></div>',title:"Details",closable:!0,buttons:[{icon:"glyphicon glyphicon-menu-up",label:" "+configlang.CANCEL,action:function(c){c.close()}}]});a.realize();a.getModalHeader().addClass("preview-header");a.setData("name","details");a.open()};
$.search_log=function(){$("tr.entry").removeClass("collapse");$("tr.entry:not(:contains("+$("#searchlogtext").val().toLowerCase()+"))").addClass("collapse")};
$(function(){$(".lang li a").click(function(){$.set_language($(this).data("value"),!1)});$(".chart li a").click(function(){$.set_chart($(this).data("value"))});$.set_params();$(".well").find(":checkbox").click(function(){$.set_params();$.refresh()});$(".number-spinner a").click(function(){var a=$(this),c=a.closest(".number-spinner").find("input"),b=$("#year").val(),d=c.val().trim();"up"==a.attr("data-dir")?d<parseInt(moment().format("YYYY"))&&(d++,b++):d>c.attr("min")&&(d--,b--);$("#year").val(b);
c.val(d);params.year=b;$.refresh()});$("#daterange").daterangepicker({showISOWeekNumbers:!0,autoApply:!0,dateLimit:{months:6},ranges:{Heute:[moment().format("DD.MM.YYYY"),moment().format("DD.MM.YYYY")],Gestern:[moment().subtract(1,"days").format("DD.MM.YYYY"),moment().subtract(1,"days").format("DD.MM.YYYY")],"Letzten 7 Tage":[moment().subtract(8,"days").format("DD.MM.YYYY"),moment().subtract(1,"days").format("DD.MM.YYYY")],"Letzten 30 Tage":[moment().subtract(31,"days").format("DD.MM.YYYY"),moment().subtract(1,
"days").format("DD.MM.YYYY")],"Letzten 60 Tage":[moment().subtract(61,"days").format("DD.MM.YYYY"),moment().subtract(1,"days").format("DD.MM.YYYY")],"Letzten 90 Tage":[moment().subtract(91,"days").format("DD.MM.YYYY"),moment().subtract(1,"days").format("DD.MM.YYYY")],"Dieser Monat":[moment().startOf("month").format("DD.MM.YYYY"),moment().subtract(1,"days").format("DD.MM.YYYY")],"Letzter Monat":[moment().startOf("month").subtract(1,"months").format("DD.MM.YYYY"),moment().startOf("month").subtract(1,
"days").format("DD.MM.YYYY")]},locale:{format:"DD.MM.YYYY",separator:" - ",applyLabel:"Fertig",cancelLabel:"Abbrechen",fromLabel:"Von",toLabel:"Bis",customRangeLabel:"Eigener Zeitraum",weekLabel:"W",daysOfWeek:"So Mo Di Mi Do Fr Sa".split(" "),monthNames:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),firstDay:1},startDate:moment().add(-8,"days").format("DD.MM.YYYY"),endDate:moment().add(-1,"days").format("DD.MM.YYYY")},function(a,c,b){params.start=
a.format("YYYY-MM-DD");params.end=c.format("YYYY-MM-DD");$.refresh()});$(".open-daterange").click(function(a){a.preventDefault();$("#daterange").click()});config.lang="ger";$.set_language(config.lang,!0);access||$.open_password()});
