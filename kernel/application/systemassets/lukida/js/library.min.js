var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(c.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};
$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,c){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(b){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||"")+"_"+c++,b)}var c=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,d={next:function(){if(b<a.length){var e=b++;return{value:c(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,b){return b})}},"es8","es3");
var urlport=location.protocol+"//",configlang={},config={},messid=0,params={areas:[],start:moment().subtract(8,"days").format("YYYY-MM-DD"),end:moment().subtract(1,"days").format("YYYY-MM-DD"),year:moment().format("YYYY")},mainarea="",chart="searches",bstacked=!1,access=!1;$.go=function(a){"discover"==a&&(window.location.href=urlport+window.location.host)};
$.toggle_area=function(a){$("#"+a+"up").toggleClass("collapse");$("#"+a+"down").toggleClass("collapse");$("#library"+a).is(":hidden")?$("#library"+a).slideDown("slow"):$("#library"+a).slideUp("slow")};$.set_params=function(){params.areas="";$(".well").find(":checkbox").each(function(){"Stapel"==$(this).attr("name")?bstacked=this.checked?!0:!1:params.areas=""==params.areas?params.areas+(this.checked?$(this).data("value"):""):params.areas+(this.checked?","+$(this).data("value"):"")})};
$.open_password=function(){var a=new BootstrapDialog({message:'<div class="form-horizontal"><div class="form-group"><label for="pwpasswort" class="col-sm-3 control-label">'+configlang.PASSWORD+'</label><div class="col-sm-9"><input type="password" class="form-control keyenter" id="pwpasswort" placeholder="'+configlang.PASSWORD+'"></div></div><div id="pw_messagebar"></div></div>',title:configlang.MODULEACCESS,closable:!0,buttons:[{icon:"glyphicon glyphicon-menu-up",label:" "+configlang.CANCEL,action:function(a){a.close()}},
{icon:"glyphicon glyphicon-log-in",label:" "+configlang.LOGIN,cssClass:"fullview-button-color",id:"pwbutton",action:function(a){$(this).blur();pw=$("#pwpasswort").val().trim();if(""==pw)return $.user_message(configlang.PASSWORDWRONG,"warning","pw"),$("#pwpasswort").focus(),-1;$.post("/ajax/checkpw",{module:"library",pw:pw},function(b){"1"==b.status?(access=!0,a.close(),$.set_cockpit()):($.user_message(configlang.LOGINERROR,"warning","pw"),$("#kennung").focus())},"json")}}],onshown:function(){$(".keyenter").keypress(function(a){13==
a.which&&($(this).blur(),$("#pwbutton").focus().click())});$("#pwpasswort").focus()}});a.realize();a.getModalHeader().addClass("preview-header");a.setData("name","pw");a.open()};
$.set_language=function(a,c){$.post("/ajax/language",{language:a},function(b){configlang=b;$(".ger").html(configlang.GER);$(".eng").html(configlang.ENG);$(".selectlanguage").attr("title",configlang.SELECTLANGUAGE);config.language=a;"ger"==a?($(".lang_ger").removeClass("hide"),$(".lang_eng").addClass("hide")):($(".lang_ger").addClass("hide"),$(".lang_eng").removeClass("hide"));$.refresh();c||$.user_message(configlang.LANGUAGECHANGED,"success")},"json")};
$.user_message=function(a,c,b,d){void 0==d&&(d=3E3);var e="success"==c?"panel-success":"panel-danger";messid++;$("#"+(void 0===b?"statusbar":b)+"_messagebar").append($("<div id='message"+messid+"' class='alert-message "+c+"' data-alert></div>"));$("#message"+messid).hide().html("<div class='panel "+e+"'><div class='panel-heading'>"+a+"</div></div>").fadeIn("fast");$("#message"+messid).delay(d).fadeOut("slow",function(){$(this).remove()})};
$.refresh=function(){$("#container_cockpit").hasClass("collapse")||$.set_cockpit();$("#container_chart").hasClass("collapse")||$.set_chart(chart);$("#container_log").hasClass("collapse")||$.set_log()};
$.set_cockpit=function(){if(access){void 0!==window.myChart&&window.myChart.destroy();"cockpit"!=mainarea&&(mainarea="cockpit",$("#container_chart").addClass("collapse"),$("#container_log").addClass("collapse"),$("#container_cockpit").removeClass("collapse"),$("#libraryoption").is(":visible")?$("#libraryoption").slideUp("slow",function(){$("#optionup").toggleClass("collapse");$("#optiondown").toggleClass("collapse");$("#libraryoption").find(".option").hide();$("#libraryoption").find(".cockpit").show()}):
($("#libraryoption").find(".option").hide(),$("#libraryoption").find(".cockpit").show()),$("#libraryhelp").is(":visible")?$("#libraryhelp").slideUp("slow",function(){$("#helpup").toggleClass("collapse");$("#helpdown").toggleClass("collapse");$("#help_chart").addClass("collapse");$("#help_log").addClass("collapse");$("#help_cockpit").removeClass("collapse")}):($("#help_chart").addClass("collapse"),$("#help_log").addClass("collapse"),$("#help_cockpit").removeClass("collapse")));var a=$.ajax({url:"/ajax/cockpit",
method:"POST",dataType:"JSON",data:{params:JSON.stringify(params)}});a.done(function(a){var b="";$.each(a.data,function(){b+="<div class='row'>";area=this.label;icon=this.icon;count=0;$.each(this.values,function(a,c){count++;b+="<div class='col-md-4'>";b+="<div class='widget ";1==count%3&&(b+="navy");2==count%3&&(b+="lazur");0==count%3&&(b+="orange");b+="'>";b+="<div class='row'>";b+="<div class='col-xs-4'>";b+="<i class='"+icon+"'></i>";b+="</div>";b+="<div class='col-xs-8 text-right'>";b+="<span> "+
area+" "+a+"</span>";b+="<h2 class='font-bold'>"+c+"</h2>";b+="</div>";b+="</div>";b+="</div>";b+="</div>"});b+="</div>"});$("#results_cockpit").html(b)});a.fail(function(a,b){console.log("Request failed: "+b)})}else $.open_password()};
$.set_chart=function(a){if(access){if("chart"!=mainarea||chart!=a)mainarea="chart",chart=a,$("#container_cockpit").addClass("collapse"),$("#container_log").addClass("collapse"),$("#container_chart").removeClass("collapse"),$("#libraryoption").is(":visible")?$("#libraryoption").slideUp("slow",function(){$("#optionup").toggleClass("collapse");$("#optiondown").toggleClass("collapse");$("#libraryoption").find(".option").hide();$("#libraryoption").find("."+a).show()}):($("#libraryoption").find(".option").hide(),
$("#libraryoption").find("."+a).show()),$("#libraryhelp").is(":visible")?$("#libraryhelp").slideUp("slow",function(){$("#helpup").toggleClass("collapse");$("#helpdown").toggleClass("collapse");$("#help_cockpit").addClass("collapse");$("#help_log").addClass("collapse");$("#help_chart").removeClass("collapse");$("#help_chart").find(".well").hide();$("#help_chart").find("."+a).show()}):($("#help_cockpit").addClass("collapse"),$("#help_log").addClass("collapse"),$("#help_chart").removeClass("collapse"),
$("#help_chart").find(".well").hide(),$("#help_chart").find("."+a).show());"searches"==a&&$.ajax({url:"/ajax/chart",method:"POST",dataType:"JSON",data:{typ:"searches",params:JSON.stringify(params)},success:function(a){void 0!==window.myChart&&window.myChart.destroy();var b=$("#chart");window.myChart=new Chart(b,{type:"bar",data:a.data,options:{title:a.title,scales:{xAxes:[{ticks:{fontColor:"#000"}}],yAxes:[{ticks:{beginAtZero:!0,fontColor:"#000"}}],gridLines:{Color:"rgba(0, 0, 0, 1)",lineWidth:2}}}})}});
"usage"==a&&$.ajax({url:"/ajax/chart",method:"POST",dataType:"JSON",data:{typ:"usage",params:JSON.stringify(params)},success:function(a){void 0!==window.myChart&&window.myChart.destroy();var b=$("#chart");window.myChart=new Chart(b,{type:"line",data:a.data,options:{title:a.title,scales:{xAxes:[{ticks:{fontColor:"#000"}}],yAxes:[{ticks:{beginAtZero:!0,fontColor:"#000"},stacked:bstacked}],gridLines:{Color:"rgba(0, 0, 0, 1)",lineWidth:2}}}})}});"usageyear"==a&&$.ajax({url:"/ajax/chart",method:"POST",
dataType:"JSON",data:{typ:"usageyear",params:JSON.stringify(params)},success:function(a){void 0!==window.myChart&&window.myChart.destroy();var b=$("#chart");window.myChart=new Chart(b,{type:"bar",data:a.data,options:{title:a.title,scales:{xAxes:[{ticks:{fontColor:"#000"}}],yAxes:[{ticks:{beginAtZero:!0,fontColor:"#000"},stacked:bstacked}],gridLines:{Color:"rgba(0, 0, 0, 1)",lineWidth:2}}}})}});"devicescreens"==a&&$.ajax({url:"/ajax/chart",method:"POST",dataType:"JSON",data:{typ:"devicescreens",params:JSON.stringify(params)},
success:function(a){void 0!==window.myChart&&window.myChart.destroy();var b=$("#chart");window.myChart=new Chart(b,{type:"bubble",data:a.data,options:{title:a.title,legend:{display:!1}}})}})}else $.open_password()};
$.set_log=function(){if(access){void 0!==window.myChart&&window.myChart.destroy();"log"!=mainarea&&(mainarea="log",$("#container_cockpit").addClass("collapse"),$("#container_chart").addClass("collapse"),$("#container_log").removeClass("collapse"),$("#libraryoption").is(":visible")?$("#libraryoption").slideUp("slow",function(){$("#optionup").toggleClass("collapse");$("#optiondown").toggleClass("collapse");$("#libraryoption").find(".option").hide();$("#libraryoption").find(".log").show()}):($("#libraryoption").find(".option").hide(),
$("#libraryoption").find(".log").show()),$("#libraryhelp").is(":visible")?$("#libraryhelp").slideUp("slow",function(){$("#helpup").toggleClass("collapse");$("#helpdown").toggleClass("collapse");$("#help_cockpit").addClass("collapse");$("#help_chart").addClass("collapse");$("#help_log").removeClass("collapse")}):($("#help_cockpit").addClass("collapse"),$("#help_chart").addClass("collapse"),$("#help_log").removeClass("collapse")));$("#searchlog").keyup(function(){$("tr.entry").removeClass("collapse");
$("tr.entry:not(:contains("+$("#searchlogtext").val().toLowerCase()+"))").addClass("collapse")});var a=$.ajax({url:"/ajax/log",method:"POST",dataType:"JSON",data:{params:JSON.stringify(params)}});a.done(function(a){var b="";b+="<div class='table-responsive'>";b+="<table class='table table-striped'>";b+="<thead><tr>";$.each(a.data[0],function(a,c){"id"!=a&&"Details"!=a&&(b+="<th>"+a+"</th>")});b+="</tr></thead>";b+="<tbody>";$.each(a.data,function(c){b+="<tr class='entry' id='log_'"+a.data[c].id+"''>";
$.each(a.data[c],function(a,c){"id"!=a&&(b="Details"==a?b+("<td style='display:none;'>"+$(c).text().toLowerCase()+"</td>"):b+("<td>"+c+"</td>"))});b+="<td>";b+="<button onClick='javascript:$.open_details(\""+escape(encodeURIComponent(a.data[c].Details))+"\")'>Details</button>";b+="</td>";b+="</tr>"});b+="</tbody></table></div>";$("#results_log").html(b)});a.fail(function(a,b){console.log("Request failed: "+b)})}else $.open_password()};
$.open_details=function(a){a=decodeURIComponent(unescape(a));a=new BootstrapDialog({message:"<div><div>"+a+'</div><div id="pw_messagebar"></div></div>',title:"Details",closable:!0,buttons:[{icon:"glyphicon glyphicon-menu-up",label:" "+configlang.CANCEL,action:function(a){a.close()}}]});a.realize();a.getModalHeader().addClass("preview-header");a.setData("name","details");a.open()};
$.search_log=function(){$("tr.entry").removeClass("collapse");$("tr.entry:not(:contains("+$("#searchlogtext").val().toLowerCase()+"))").addClass("collapse")};
$(function(){$(".lang li a").click(function(){$.set_language($(this).data("value"),!1)});$(".chart li a").click(function(){$.set_chart($(this).data("value"))});$.set_params();$(".well").find(":checkbox").click(function(){$.set_params();$.refresh()});$(".number-spinner a").click(function(){var a=$(this),c=a.closest(".number-spinner").find("input"),b=$("#year").val(),d=c.val().trim();"up"==a.attr("data-dir")?d<parseInt(moment().format("YYYY"))&&(d++,b++):d>c.attr("min")&&(d--,b--);$("#year").val(b);
c.val(d);params.year=b;$.refresh()});$("#daterange").daterangepicker({showISOWeekNumbers:!0,autoApply:!0,dateLimit:{months:6},ranges:{Heute:[moment().format("DD.MM.YYYY"),moment().format("DD.MM.YYYY")],Gestern:[moment().subtract(1,"days").format("DD.MM.YYYY"),moment().subtract(1,"days").format("DD.MM.YYYY")],"Letzten 7 Tage":[moment().subtract(8,"days").format("DD.MM.YYYY"),moment().subtract(1,"days").format("DD.MM.YYYY")],"Letzten 30 Tage":[moment().subtract(31,"days").format("DD.MM.YYYY"),moment().subtract(1,
"days").format("DD.MM.YYYY")],"Letzten 60 Tage":[moment().subtract(61,"days").format("DD.MM.YYYY"),moment().subtract(1,"days").format("DD.MM.YYYY")],"Letzten 90 Tage":[moment().subtract(91,"days").format("DD.MM.YYYY"),moment().subtract(1,"days").format("DD.MM.YYYY")],"Dieser Monat":[moment().startOf("month").format("DD.MM.YYYY"),moment().subtract(1,"days").format("DD.MM.YYYY")],"Letzter Monat":[moment().startOf("month").subtract(1,"months").format("DD.MM.YYYY"),moment().startOf("month").subtract(1,
"days").format("DD.MM.YYYY")]},locale:{format:"DD.MM.YYYY",separator:" - ",applyLabel:"Fertig",cancelLabel:"Abbrechen",fromLabel:"Von",toLabel:"Bis",customRangeLabel:"Eigener Zeitraum",weekLabel:"W",daysOfWeek:"So Mo Di Mi Do Fr Sa".split(" "),monthNames:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),firstDay:1},startDate:moment().add(-8,"days").format("DD.MM.YYYY"),endDate:moment().add(-1,"days").format("DD.MM.YYYY")},function(a,c,b){params.start=
a.format("YYYY-MM-DD");params.end=c.format("YYYY-MM-DD");$.refresh()});$(".open-daterange").click(function(a){a.preventDefault();$("#daterange").click()});config.lang="ger";$.set_language(config.lang,!0);access||$.open_password()});
